language: node_js
node_js: stable
script:
- npm run build
- npm run test:lint
- wct --skip-plugin local
- 'if [ "$TRAVIS_BRANCH" == "master" ]; then frauci-update-version && export TRAVIS_TAG=$(frauci-get-version) && npm run build && npm run publish-release; fi'
env:
  global:
  - REPO_NAME=d2l-fetch-simple-cache
  # SAUCE_USERNAME
  - secure: tulJfszKW5CVmDqaAdDdVQfNV9+OO8dsVB2b4X5dzTwC7bF2oNREVTHSkLUbxDCzBLRCmZfCTZc+h+Hz1e5OuppBJL99rp96NRe94XgFcq8ecOYhlhxIk8yrJ2RoeRgdpAMsi0EddsuDP36i2F2x6t5kqUATk3uZwVskzlU4NIXf8LzW3XvpEzSiLfuSqrmJ4P4lAmwTxMZ+S33gBoO7me1BBL3JhaX5hHAEyawWMffyPomLwiJEe3n0M8lahN1fp8gAR3WkC2LRX8ab/omuvqgTTDzpT8buxPuqTIxypPYhXDjlM3mGWvUpZ1jcMZloyEJXRFVWmBZeYZXMgyvYhV47FpU42kXl0RP9C+v7pACrzEenWKzhsqNbkC8YbedHTAYfonJdfs5y7pzIRK8+Yxo/BUH7sxuGBOm+KEOQtlj42NI1U0llaiagm5KZHJdM4W691Y+tuZ6OU/YxBd+/ofKsuaW2lJZXkZnwnwKLHA5FsEk/Zrvi0dl2Ld+bwFpupb0D7k5Pj7SBi86igN0Zcl8VmHI6mUgZGk6bVblqd44MdySKcmCqJKz7rtC+axLlOnHj/JUAjWJWEnmXKTBygamYqrKn+0OL2VX5KtR3ateUJGrUy9BP6SehlI5Cy1R2+1Fg5tbFbH7tnz1jPdSrAabMDSGWWSZrAcoE7wXUoZ0=
  # CDN_SECRET
  - secure: gNw6oQpfk9El+ERg+UKVT7uKiYBo8N45l89vAgRnuWn65zwGF55BwOqJdd4MlX8lrgNPWR3wkG02bdPQqEQGu91H/+ABDoGnxZiG/HdZHgRMXE3NqowPtgz+ltgseD6C4xw5l2fkmFGPXIrQ5n095rDh+u0e06MKmK/+KPjlQiBI2HJwoO+GMp4Sere6O+KRIB/RVB6dIRv5Kfgu7OWKzqraigE9VFw/jRyNqGhQKn1HdJb3nOQyFAII0HZghCiesHAHP0lldEvSRmevAM1vEgBcwaJgJmpwjuZcBc64c/W0y098ZaG4OFbD9oEMEtgnjijsCb9BA44ShybLn6SeIt9hDCSo5ptgdYPpoR6wtUWLGGuYar7/bzPovTlh5cgu9ZZUjAebl08PPa/fOAuzAkydAT3bd17wVDw3l/M1IOOdcATQ0GKY/upUvge7pN3B7yFnqiBLiDqhqXrbM58n8ugWD6Sotju/G+2uJuZ/qXW7u/c1O0qfzZbL8uIs4W6HJNeeQBwVwuZ0H2kom5bR8lTL+1b0LKogx33LTjos26Gy+Ov9iG3gqeruuaiaH5d1E7IEhV8dgh5zeEmDBhz3iFLJQnSjM5L8V9W3htDABYMJRwT94M8F5pxXIUBsItOKvePciqVYsKsDer/7gf8RVEc6cAzmJ7qQKwlp9yfOhYc=
  # GITHUB_RELEASE_TOKEN
  - secure: cCuKrRr2ebOBO+hApunX0GbBtx91PtXW628onGoh4c8JldOEJlUzaMFgSAGOnTLCGZWCvesXFSUyGPvhtr2H6C6Y9HmVB5VT6jS4P11roKvoSTR0nUpLbV47YoX0TRYUF5UGOPTgNW7tH1dCxdDsy4B2VNiFpju8mTJ+CGeDYZQBXyVvRVFqSjNLARbm9j0448lxWIKMZJROAJX6f9/irIE27NwpcegoViQMdLombrZIYVDDAyBlaoSkYG7dwJZnG/7KmwEistEB2RGAcIOPmtfao1PBT00GzuBUnSwoB8apHxe7s82oOseo3xxjVv7ZQfhKLEkLR20yT4Vms15kwlcaOXR9ALDeox5Lbq/Jp2IF+KWYBlmQL/J6kC1mJIyaREjHVt7FciN20LR3a3fa60gDWOAFUXf1FMMgdXekEW6Sejop8qGCjC9ereSaL2q5QZMMJfXKqIf/1yJLgXoVJNNp5VKvBD7HBgqLjsyvfUkth9/cLPKN5FRIFdwgEpHWH4pdSmltnFMO6hHFzvnPaL/3xRWNr4B5FsXnWP72X46X5vT/u3yXvpMako6Zao45th5YHKM4EL0VqbHv5gAkl0ZK8ejIsDnQlxlu7Lt3oh71O3nWWWSTY9UHVs8cFV3kUztRWjAyAp2COBa8YRcjkvuUTgYrzizull18vT2SVuk=
addons:
  jwt:
    #SAUCE_ACCESS_KEY
    secure: kBSW1WHkWXXMSz2uNFFREcLg7CI6luReVTmy/mGDaKJsO3CwYz7+hWl6vFr4+0+tRy/IOM2xgJxgnpWtSk54Id9ZvhtfVcuDZjIl4luqoPJgcX9NgxuNTJ02WQokByAEQ8ViRDB1lpuQsajc8d+3RZMiypVRl5QXo48b72mxr12FTZdZn0ld0DKGpvRs93BvvgqYLry21d/NlHkLEdsETEt/ifDXV4w+dqRaDOc9OlU4O+aWr1RTjfaWD96fFZD3eP67k/+GCL1v21YLWRzhs8Q/mT1SiJLYyQXhREwbIuYyXWMKR6i+3MjE818YUfDaLvkVF87UN72KEWS7o4OBxRocA8AE9JkiSYDqMQ567gjv0y+19WEWG7pCfBzpBbQVaMrxuJnGZtOjgpVTIao51AprPZQDt+oTw34nFyhnAJPaBRjmbKjvAOV8WIfuWpE+b2K27+97A/Uozk6NMeBnRuAVL31emBjzpJ0kDFpsoKIKuJv0hmuKacla7dFMOe7q+kC5gweYFGsN33ZUP8/lb7sRlSTPs0U7f4Giy0lAgbDh4nXsin9j4k0694LfiP1NCr2ua490c6qF1n2CwLUm7iomYnfuTF8Z0+sE1Im+iyBKXiT0+LQX12q4W16+08h+yuTUJr7/XtBLuTORjGxyG5H9keH8GKcAC3SDCh6aut0=
